<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>PrivateRedirectJS</title>
</head>

<body>
    <h1><a target="_blank" href="https://github.com/SygWave/PrivateRedirectJS">PrivateRedirectJS</a></h1>
    <p><em>Reconstruct social links to privacy-friendly front-ends</em></p>
    <hr>

    <p><strong>Instagram to <a target="_blank" href="https://github.com/cloudrac3r/bibliogram">Bibliogram</a></strong></p>
    <textarea id="bibliogram" type="text" placeholder="Enter Instagram username or full direct link to post:" rows="4"></textarea><br>
    <input type="submit" value="Convert to Bibliogram" onclick="privateRedirect(document.getElementById('bibliogram'));">
    <p id="bibliogram-output"></p>
    <input type="reset" value="Reset Bibliogram" onclick="reset(document.getElementById('bibliogram'));">

    <p><strong>Twitter to <a target="_blank" href="https://github.com/zedeus/nitter">nitter</a></strong></p>
    <textarea id="nitter" type="text" placeholder="Enter Twitter username or full direct link to tweet:" rows="4"></textarea><br>
    <input type="submit" value="Convert to nitter" onclick="privateRedirect(document.getElementById('nitter'));">
    <p id="nitter-output"></p>
    <input type="reset" value="Reset nitter" onclick="reset(document.getElementById('nitter'));">

    <script>
        function privateRedirect(element) {
            var id = element.id;
            var outputElement = document.getElementById(id + "-output");
            var input = element.value;
            outputElement.innerHTML = "";
            if (isNotEmpty(input)) {
                if (id == "bibliogram") {
                    var bibliogram = "https://bibliogram.art/";
                    var key = "p/";
                    if (input.includes(key)) {
                        outputElement.innerHTML = createLink(bibliogram + key + input.split(key)[1]);
                    } else {
                        outputElement.innerHTML = createLink(bibliogram + "u/" + input);
                    }
                } else if (id == "nitter") {
                    var nitter = "https://nitter.net/"
                    var key = "twitter.com/";
                    if (input.includes(key)) {
                        outputElement.innerHTML = createLink(nitter + input.split(key)[1]);
                    } else {
                        outputElement.innerHTML = createLink(nitter + input);
                    }
                }
            } else {
                reset(element);
            }
        }
        function isNotEmpty(str) {
            return !(str == "" || str === null || /\s/.test(str));
        }
        function createLink(site) {
            return "<a target='_blank' href='" + site + "'>" + site + "</a>";
        }
        function reset(element) {
            element.value = "";
            document.getElementById(element.id + "-output").innerHTML = "";
        }
    </script>
</body>

</html>