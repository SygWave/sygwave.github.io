<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>PrivateRedirectJS</title>
</head>

<body>
    <h1><a target="_blank" href="https://github.com/SygWave/PrivateRedirectJS">PrivateRedirectJS</a></h1>
    <p><em>Reconstruct social links to privacy-friendly front-ends</em></p>
    <hr>

    <p><strong>Instagram to <a target="_blank" href="https://github.com/cloudrac3r/bibliogram">Bibliogram</a></strong></p>
    <textarea id="bibliogram" type="text" placeholder="Enter Instagram username or full direct link to profile or post:" rows="5"></textarea><br>
    <input type="submit" value="Convert to Bibliogram" onclick="privateRedirect(document.getElementById('bibliogram'));">
    <p>
        <a target="_blank" id="bibliogram-output"></a>
    </p>
    <input type="reset" value="Reset Bibliogram" onclick="reset(document.getElementById('bibliogram'));">

    <p><strong>Twitter to <a target="_blank" href="https://github.com/zedeus/nitter">nitter</a></strong></p>
    <textarea id="nitter" type="text" placeholder="Enter Twitter username or full direct link to profile or tweet:" rows="5"></textarea><br>
    <input type="submit" value="Convert to nitter" onclick="privateRedirect(document.getElementById('nitter'));">
    <p>
        <a target="_blank" id="nitter-output"></a>
    </p>
    <input type="reset" value="Reset nitter" onclick="reset(document.getElementById('nitter'));">

    <p><strong>YouTube to <a target="_blank" href="https://github.com/iv-org/invidious">Invidious</a></strong></p>
    <textarea id="invidious" type="text" placeholder="Enter YouTube username or full direct link to channel or video:" rows="5"></textarea><br>
    <input type="submit" value="Convert to Invidious" onclick="privateRedirect(document.getElementById('invidious'));">
    <p>
        <a target="_blank" id="invidious-output"></a>
    </p>
    <input type="reset" value="Reset Invidiouos" onclick="reset(document.getElementById('invidious'));">

    <script>
        function privateRedirect(element) {
            var id = element.id;
            var outputElement = document.getElementById(id + "-output");
            var input = element.value;
            outputElement.innerText = "";
            if (isNotEmpty(input)) {
                if (id == "bibliogram") {
                    var bibliogram = "https://bibliogram.art/";
                    var key = "instagram.com/";
                    if (input.includes(key + "p/")) {
                        setAnchor(outputElement, bibliogram + input.split(key)[1]);
                    } else if (input.includes(key)) {
                        setAnchor(outputElement, bibliogram + "u/" + input.split(key)[1]);
                    } else {
                        setAnchor(outputElement, bibliogram + "u/" + input);
                    }
                } else if (id == "nitter") {
                    var nitter = "https://nitter.net/";
                    var key = "twitter.com/";
                    if (input.includes(key)) {
                        setAnchor(outputElement, nitter + input.split(key)[1]);
                    } else {
                        setAnchor(outputElement, nitter + input);
                    }
                } else if (id == "invidious") {
                    var invidious = "https://invidiou.site/";
                    var key = "youtube.com/";
                    if (input.includes(key)) {
                        setAnchor(outputElement, invidious + input.split(key)[1]);
                    } else {
                        setAnchor(outputElement, invidious + "channel/" + input);
                    }
                }
            } else {
                reset(element);
            }
        }

        function isNotEmpty(str) {
            return !(str == "" || str === null || /\s/.test(str));
        }

        function setAnchor(element, link) {
            element.innerText = link;
            element.href = link;
        }

        function reset(element) {
            element.value = "";
            document.getElementById(element.id + "-output").innerText = "";
        }
    </script>
</body>

</html>